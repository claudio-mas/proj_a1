{% extends 'base.html' %}

{% load form_filters %}

{% block title %}Editar Cliente{% endblock %}

{% block content %}

<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulário de Cadastro</title>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- InputMask -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.inputmask/5.0.7/jquery.inputmask.min.js"></script>
    <!-- Datepicker -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-datepicker@1.9.0/dist/css/bootstrap-datepicker.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-datepicker@1.9.0/dist/js/bootstrap-datepicker.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-datepicker@1.9.0/dist/locales/bootstrap-datepicker.pt-BR.min.js"></script>
</head>
<body>
    <div class="container mt-5">
        <!-- Feedback de Status -->
        {% if messages %}
        <div class="alert alert-{{ message.tags }} mt-3" role="alert">
            {{ message }}
        </div>
        {% endif %}

        <h1 class="mb-4">Formulário de Cadastro</h1>

        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}

            <!-- Informações Pessoais -->
            <div class="card mb-4">
                <div class="card-header bg-primary text-white">
                    <i class="fas fa-user"></i> Informações Pessoais
                </div>
                <div class="card-body row g-3">
                    <div class="col-md-6">
                        {{ form.nome.label_tag }}
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text"><i class="fas fa-user"></i></span>
                            </div>
                            {{ form.nome|add_class:"form-control" }}
                        </div>
                        {% for error in form.nome.errors %}
                            <div class="invalid-feedback d-block">{{ error }}</div>
                        {% endfor %}
                    </div>
                    <div class="col-md-6">
                        {{ form.datanasc.label_tag }}
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text"><i class="fas fa-calendar"></i></span>
                            </div>
                            {{ form.datanasc|add_class:"form-control" }}
                        </div>
                        {% for error in form.datanasc.errors %}
                            <div class="invalid-feedback d-block">{{ error }}</div>
                        {% endfor %}
                    </div>
                    <div class="col-md-6">
                        {{ form.cpf.label_tag }}
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text"><i class="fas fa-id-card"></i></span>
                            </div>
                            {{ form.cpf|add_class:"form-control" }}
                        </div>
                        {% for error in form.cpf.errors %}
                            <div class="invalid-feedback d-block">{{ error }}</div>
                        {% endfor %}
                    </div>
                    <div class="col-md-6">
                        {{ form.rg.label_tag }}
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text"><i class="fas fa-id-card"></i></span>
                            </div>
                            {{ form.rg|add_class:"form-control" }}
                        </div>
                        {% for error in form.rg.errors %}
                            <div class="invalid-feedback d-block">{{ error }}</div>
                        {% endfor %}
                    </div>
                    <div class="col-md-6">
                        {{ form.cnpj.label_tag }}
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text"><i class="fas fa-building"></i></span>
                            </div>
                            {{ form.cnpj|add_class:"form-control" }}
                        </div>
                        {% for error in form.cnpj.errors %}
                            <div class="invalid-feedback d-block">{{ error }}</div>
                        {% endfor %}
                    </div>
                    <div class="col-md-6">
                        {{ form.cro.label_tag }}
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text"><i class="fas fa-id-badge"></i></span>
                            </div>
                            {{ form.cro|add_class:"form-control" }}
                        </div>
                        {% for error in form.cro.errors %}
                            <div class="invalid-feedback d-block">{{ error }}</div>
                        {% endfor %}
                    </div>
                </div>
            </div>

            <!-- Endereço -->
            <div class="card mb-4">
                <div class="card-header bg-secondary text-white">
                    <i class="fas fa-map-marker-alt"></i> Endereço
                </div>
                <div class="card-body row g-3">
                    <div class="col-md-6">
                        {{ form.cep.label_tag }}
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text"><i class="fas fa-map-pin"></i></span>
                            </div>
                            {{ form.cep|add_class:"form-control" }}
                        </div>
                        {% for error in form.cep.errors %}
                            <div class="invalid-feedback d-block">{{ error }}</div>
                        {% endfor %}
                    </div>
                    <div class="col-md-6">
                        {{ form.uf.label_tag }}
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text"><i class="fas fa-flag"></i></span>
                            </div>
                            {{ form.uf|add_class:"form-control" }}
                        </div>
                        {% for error in form.uf.errors %}
                            <div class="invalid-feedback d-block">{{ error }}</div>
                        {% endfor %}
                    </div>
                    <div class="col-md-6">
                        {{ form.endereco.label_tag }}
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text"><i class="fas fa-road"></i></span>
                            </div>
                            {{ form.endereco|add_class:"form-control" }}
                        </div>
                        {% for error in form.endereco.errors %}
                            <div class="invalid-feedback d-block">{{ error }}</div>
                        {% endfor %}
                    </div>
                    <div class="col-md-6">
                        {{ form.numero.label_tag }}
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text"><i class="fas fa-sort-numeric-down"></i></span>
                            </div>
                            {{ form.numero|add_class:"form-control" }}
                        </div>
                        {% for error in form.numero.errors %}
                            <div class="invalid-feedback d-block">{{ error }}</div>
                        {% endfor %}
                    </div>
                    <div class="col-md-6">
                        {{ form.complemento.label_tag }}
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text"><i class="fas fa-info-circle"></i></span>
                            </div>
                            {{ form.complemento|add_class:"form-control" }}
                        </div>
                        {% for error in form.complemento.errors %}
                            <div class="invalid-feedback d-block">{{ error }}</div>
                        {% endfor %}
                    </div>
                    <div class="col-md-6">
                        {{ form.bairro.label_tag }}
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text"><i class="fas fa-city"></i></span>
                            </div>
                            {{ form.bairro|add_class:"form-control" }}
                        </div>
                        {% for error in form.bairro.errors %}
                            <div class="invalid-feedback d-block">{{ error }}</div>
                        {% endfor %}
                    </div>
                    <div class="col-md-6">
                        {{ form.cidade.label_tag }}
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text"><i class="fas fa-building"></i></span>
                            </div>
                            {{ form.cidade|add_class:"form-control" }}
                        </div>
                        {% for error in form.cidade.errors %}
                            <div class="invalid-feedback d-block">{{ error }}</div>
                        {% endfor %}
                    </div>
                </div>
            </div>

            <!-- Informações de Contato -->
            <div class="card mb-4">
                <div class="card-header bg-success text-white">
                    <i class="fas fa-phone"></i> Informações de Contato
                </div>
                <div class="card-body row g-3">
                    <div class="col-md-4">
                        {{ form.telefone.label_tag }}
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text"><i class="fas fa-phone"></i></span>
                            </div>
                            {{ form.telefone|add_class:"form-control" }}
                        </div>
                        {% for error in form.telefone.errors %}
                            <div class="invalid-feedback d-block">{{ error }}</div>
                        {% endfor %}
                    </div>
                    <div class="col-md-4">
                        {{ form.celular.label_tag }}
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text"><i class="fas fa-mobile-alt"></i></span>
                            </div>
                            {{ form.celular|add_class:"form-control" }}
                        </div>
                        {% for error in form.celular.errors %}
                            <div class="invalid-feedback d-block">{{ error }}</div>
                        {% endfor %}
                    </div>

                    <div class="col-md-4">
                        <div class="form-check">

                            {{ form.whatsapp|add_class:"form-check-input" }}
                            <label class="form-check-label" for="{{ form.whatsapp.id_for_label }}">
                                <i class="fab fa-whatsapp"></i> WhatsApp
                            </label>
                        </div>
                        {% for error in form.whatsapp.errors %}
                            <div class="invalid-feedback d-block">{{ error }}</div>
                        {% endfor %}
                    </div>
                    <div class="col-md-6">
                        {{ form.email.label_tag }}
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text"><i class="fas fa-envelope"></i></span>
                            </div>
                            {{ form.email|add_class:"form-control" }}
                        </div>
                        {% for error in form.email.errors %}
                            <div class="invalid-feedback d-block">{{ error }}</div>
                        {% endfor %}
                    </div>
                    <div class="col-md-6">
                        {{ form.instagram.label_tag }}
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text"><i class="fab fa-instagram"></i></span>
                            </div>
                            {{ form.instagram|add_class:"form-control" }}
                        </div>
                        {% for error in form.instagram.errors %}
                            <div class="invalid-feedback d-block">{{ error }}</div>
                        {% endfor %}
                    </div>
                </div>
            </div>

            <!-- Botões -->
            <div class="d-flex justify-content-end gap-2">
                <button type="submit" class="btn btn-success">Salvar</button>
                <a href="{% url 'clientes' %}" class="btn btn-danger">Cancelar</a>
            </div>
        </form>
    </div>

    <script>
        // Aplicar máscaras
        const inputMasks = {
            '#id_uf': 'AA',
            '#id_cnpj': '99.999.999/9999-99',
            '#id_cpf': '999.999.999-99',
            '#id_rg': '99.999.999-9',
            '#id_cro': '9999999',
            '#id_celular': '(99) 99999-9999',
            '#id_telefone': '(99) 9999-9999',
            '#id_cep': '99999-999'
        };

        $(document).ready(function() {
            $.each(inputMasks, function(selector, mask) {
                $(selector).inputmask(mask);
            });
            $('#id_datanasc').datepicker({
                format: 'dd/mm/yyyy',
                language: 'pt-BR',
                autoclose: true,
                todayHighlight: true,
                todayBtn: true,
                clearBtn: true,
                orientation: 'bottom left',
                startDate: '01/01/1900',
                endDate: '31/12/2050'
            });
        });
    </script>
</body>
</html>

{% endblock %}
